# Тестовое задание, работа с MongoDB

Тестовое задание по работе с MongoDB. 

Доступны две функции:
- функция агрегации действий пользователей
```
aggregate_actions(account)
```
Получает коллекцию `account`, возвращает список пользователей с данными о последних действиях. 

- функция сопоставление платежей и начислений
```
match_payments(accrual, payment)
```
Получает коллекции `accrual` и `payment`, возвращает список сопоставленных пар платёж - начисление, и список платежей для которых не нашлось начислений.

## Запуск

- Скачайте код
- Установите зависимости командой `pip install -r requirements.txt`
- Для работы понадобится доступ к серверу с базой данных [MongoDB](https://www.mongodb.com/)
- Создайте файл `.env` с переменными окружения (См. пункт 'переменные окружения')
- При необходимости заполните БД тестовыми данными командой `python fill_db.py` или `python3 fill_db.py`, если есть конфликт со второй версией python.
- Запустите скрипт командой `python main.py` или `python3 main.py`, если есть конфликт со второй версией python.

Или импортируйте вышеуказанные функции в свой проект:
```python
from mongodb_utils import aggregate_actions, match_payments
```

## Переменные окружения

Настройки для доступа к БД берутся из переменных окружения. Чтобы их определить, создайте файл `.env` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны следующие переменные:
- `MONGO_HOST` — адрес хоста с MongoDB (по умолчанию `localhost`)
- `MONGO_PORT` — порт (по умолчанию `27017`)
- `MONGO_PASSWORD` — пароль для доступа БД
- `MONGO_LOGIN` — логин для доступа к БД

Логин и пароль не заполнять, если контроль доступа со стороны БД не настроен.